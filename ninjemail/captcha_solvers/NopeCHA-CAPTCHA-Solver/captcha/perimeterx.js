(()=>{var u=chrome;var l="https://api.nopecha.com",n="https://www.nopecha.com",b="https://developers.nopecha.com",L={doc:{url:b,automation:{url:`${b}/guides/extension_advanced/#automation-build`}},api:{url:l,recognition:{url:`${l}/recognition`},status:{url:`${l}/status`}},www:{url:n,annoucement:{url:`${n}/json/announcement.json`},demo:{url:`${n}/demo`,hcaptcha:{url:`${n}/demo/hcaptcha`},recaptcha:{url:`${n}/demo/recaptcha`},funcaptcha:{url:`${n}/demo/funcaptcha`},awscaptcha:{url:`${n}/demo/awscaptcha`},turnstile:{url:`${n}/demo/turnstile`},textcaptcha:{url:`${n}/demo/textcaptcha`},perimeterx:{url:`${n}/demo/perimeterx`}},manage:{url:`${n}/manage`},pricing:{url:`${n}/pricing`},setup:{url:`${n}/setup`}},discord:{url:`${n}/discord`},github:{url:`${n}/github`,release:{url:`${n}/github/release`}}};function _(e){let t=("6146a541f7b2046020e84d44aa2e1e120f2ad8b75ac9b6fc236f65f737a7006f"+e).split("").map(o=>o.charCodeAt(0));return v(t)}var h=new Uint32Array(256);for(let e=256;e--;){let t=e;for(let o=8;o--;)t=t&1?3988292384^t>>>1:t>>>1;h[e]=t}function v(e){let t=-1;for(let o of e)t=t>>>8^h[t&255^o];return(t^-1)>>>0}async function s(e,t){let o=""+[+new Date,performance.now(),Math.random()],[a,f]=await new Promise(T=>{u.runtime.sendMessage([o,e,...t],T)});if(a===_(o))return f}function w(){let e;return t=>e||(e=t().finally(()=>e=void 0),e)}var k=w(),r;function S(){return k(async()=>(r||(r=await s("settings::get",[])),r))}function x(e){r&&(r={...r,...e},y(r))}function c(){return r}function i(e){return new Promise(t=>setTimeout(t,e))}var $=[];function C(e,t){e.timedout=!1,$.push(e);let o,a=setInterval(async()=>{await B(e,c())||(clearTimeout(o),clearInterval(a))},400);t&&(o=setTimeout(()=>clearInterval(a),t),e.timedout=!0)}async function B(e,t){if(e.timedout)return!1;let o=e.condition(t);if(o===e.running())return!1;if(!o&&e.running())return e.quit(),!1;if(o&&!e.running()){for(;!e.ready();)await i(200);return e.start(),!1}}function y(e){$.forEach(t=>B(t,e))}function M(){u.runtime.connect({name:"stream"}).onMessage.addListener(t=>{t.event==="settingsUpdate"&&x(t.settings)})}function d(e){if(document.readyState!=="loading")setTimeout(e,0);else{let t;t=()=>{removeEventListener("DOMContentLoaded",t),e()},addEventListener("DOMContentLoaded",t)}}var p,m=!1;function P(){return!(!g()||!document.querySelector("[role=button]"))}function q(){m=!0,p=new MutationObserver(()=>{document.querySelector("[role=button]").dispatchEvent(new MouseEvent("mouseup"))}),p.observe(document.querySelector('[aria-label="Human challenge"], [aria-label="Press & Hold"]'),{attributes:!0,attributeFilter:["aria-label"]}),N()}function A(){m=!1,p.disconnect()}function H(){return m}function g(){try{return!!(window.top!==window&&window.top.top===window.top&&[...window.top.document.querySelectorAll("script")].some(e=>e.innerText.includes("_pxAppId"))&&document.querySelector('[aria-label="Human challenge"], [aria-label="Press & Hold"]'))}catch{return!1}}async function N(){let e=c();e.perimeterx_solve_delay&&await i(e.perimeterx_solve_delay_time),document.querySelector("[role=button]").dispatchEvent(new MouseEvent("mousedown"))}async function E(){let e=!1;for(let o=0;o<3;o++)if(await i(1e3),g()){e=!0;break}if(!e)return;M(),await S(),await s("tab::registerDetectedCaptcha",["perimeterx"]);let t=location.hostname;C({name:"perimeterx/auto-solve",condition:o=>o.enabled&&o.perimeterx_auto_solve&&!o.disabled_hosts.includes(t),ready:P,start:q,quit:A,running:H})}d(E);})();
